<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartStore 360</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="loginForm" class="flex items-center justify-center h-screen">
    <div class="login-container">
      <div class="logo-container">
        <div class="logo-circle"><i class="fas fa-store logo-icon"></i></div>
        <h1 class="logo-text">SmartStore 360</h1>
      </div>
      <h2 class="welcome-text">Welcome!</h2>
      <form id="login">
        <div class="form-group"><label for="username">Username</label><input id="username" type="text" placeholder="Enter your username" required></div>
        <div class="form-group"><label for="password">Password</label><input id="password" type="password" placeholder="Enter your password" required></div>
        <div id="loginError" class="error-message"></div>
        <button type="submit" id="loginButton" class="login-button">Sign In</button>
      </form>
      <p class="footer-text">Â© 2025 SmartStore 360. All rights reserved.</p>
    </div>
  </div>
  <div id="app" class="container hidden">
    <div class="header flex items-center justify-between">
      <div class="flex items-center">
        <i class="fa-solid fa-bars hamburger" id="menuToggle"></i>
        <h2 id="activeTabName" class="text-lg font-bold ml-4 text-dark">Dashboard</h2>
      </div>
      <button id="logoutButton" class="p-2 bg-error text-white rounded">Logout</button>
    </div>
   
    <nav id="navMenu" class="nav-menu">
      <ul>
        <li><a href="#" data-tab="dashboardSection" class="manager-only"><i class="fa-solid fa-gauge-high"></i>Dashboard</a></li>
        <li><a href="#" data-tab="salesSection"><i class="fa-solid fa-cart-shopping"></i>Sales</a></li>
        <li><a href="#" data-tab="inventorySection" class="manager-only"><i class="fa-solid fa-warehouse"></i>Inventory</a></li>
        <li><a href="#" data-tab="reportsSection" class="manager-only"><i class="fa-solid fa-chart-line"></i>Reports</a></li>
        <li><a href="#" data-tab="changePasswordSection" class="manager-only"><i class="fa-solid fa-key"></i>Change Password</a></li>
        <li><a href="#" data-tab="manageUsersSection" class="manager-only"><i class="fa-solid fa-users"></i>Manage Users</a></li>
      </ul>
    </nav>
    <!-- Dashboard Section - ENHANCED -->
<div id="dashboardSection" class="card mt-4 manager-only">
  <!-- Enhanced Dashboard Header - Narrow Layout -->
  <div class="dashboard-header">
    <div class="dashboard-header-content">
      <!-- Left: Store Name and Welcome Message -->
      <div class="store-info">
        <div class="store-name">SmartStore 360</div>
        <div id="welcomeMessage" class="welcome-message">Welcome, Manager</div>
      </div>
     
      <!-- Right: Date/Time and Last Sync -->
      <div class="time-info">
        <div id="currentDateTime" class="current-datetime">Saturday, October 25, 2025 at 10:27:51 AM</div>
        <div class="sync-info">
          <div class="sync-label">Last Sync</div>
          <div id="lastSyncTime" class="sync-time">10:23:55 AM</div>
        </div>
      </div>
    </div>
  </div>
  <div class="mb-6">
    <!-- Rest of the dashboard content remains exactly the same -->
    <h2 class="text-lg font-bold text-dark mb-4">Business Overview</h2>
   
    <!-- Key Metrics Cards -->
    <div class="metrics-grid">
      <!-- Today's Sales -->
      <div class="metric-card green">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-green-200 text-sm">Today's Sales</p>
            <p class="text-white text-2xl font-bold" id="todaySales">GHC 0.00</p>
            <p class="text-green-300 text-xs" id="todaySalesCount">0 transactions</p>
          </div>
          <i class="fas fa-shopping-cart text-green-300 text-2xl"></i>
        </div>
      </div>
      <!-- Inventory Value -->
      <div class="metric-card blue">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-blue-200 text-sm">Inventory Value</p>
            <p class="text-white text-2xl font-bold" id="inventoryValue">GHC 0.00</p>
            <p class="text-blue-300 text-xs" id="totalItems">0 items</p>
          </div>
          <i class="fas fa-warehouse text-blue-300 text-2xl"></i>
        </div>
      </div>
      <!-- Low Stock Alerts -->
      <div class="metric-card orange">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-orange-200 text-sm">Low Stock Items</p>
            <p class="text-white text-2xl font-bold" id="lowStockCount">0</p>
            <p class="text-orange-300 text-xs">Need restocking</p>
          </div>
          <i class="fas fa-exclamation-triangle text-orange-300 text-2xl"></i>
        </div>
      </div>
      <!-- Out of Stock -->
      <div class="metric-card red">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-red-200 text-sm">Out of Stock</p>
            <p class="text-white text-2xl font-bold" id="outOfStockCount">0</p>
            <p class="text-red-300 text-xs">Urgent attention</p>
          </div>
          <i class="fas fa-times-circle text-red-300 text-2xl"></i>
        </div>
      </div>
    </div>
    <!-- Two Column Layout -->
    <div class="dashboard-grid">
      <!-- Left Column: Recent Activity & Quick Actions -->
      <div class="space-y-6">
        <!-- Quick Actions -->
        <div class="card">
          <h3 class="text-lg font-bold text-dark mb-4">Quick Actions</h3>
          <div class="quick-actions-container">
            <button id="quickActionNewSale" class="quick-action-btn">
              <div class="btn-content">
                <div class="btn-icon">
                  <i class="fas fa-cart-plus"></i>
                </div>
                <div class="btn-text">
                  <div class="btn-title">New Sale</div>
                  <div class="btn-subtitle">Process customer purchase</div>
                </div>
              </div>
            </button>
           
            <button id="quickActionViewInventory" class="quick-action-btn">
              <div class="btn-content">
                <div class="btn-icon">
                  <i class="fas fa-boxes"></i>
                </div>
                <div class="btn-text">
                  <div class="btn-title">View Inventory</div>
                  <div class="btn-subtitle">Check stock levels</div>
                </div>
              </div>
            </button>
           
            <button id="quickActionViewReports" class="quick-action-btn">
              <div class="btn-content">
                <div class="btn-icon">
                  <i class="fas fa-chart-bar"></i>
                </div>
                <div class="btn-text">
                  <div class="btn-title">View Reports</div>
                  <div class="btn-subtitle">Sales analytics</div>
                </div>
              </div>
            </button>
           
            <button id="refreshDashboard" class="quick-action-btn">
              <div class="btn-content">
                <div class="btn-icon">
                  <i class="fas fa-refresh"></i>
                </div>
                <div class="btn-text">
                  <div class="btn-title">Refresh Data</div>
                  <div class="btn-subtitle">Update all metrics</div>
                </div>
              </div>
            </button>
          </div>
        </div>
        <!-- Recent Sales Activity -->
        <div class="card">
          <h3 class="text-lg font-bold text-dark mb-4">Recent Sales</h3>
          <div id="recentSales" class="space-y-2">
            <p class="text-center text-secondary py-4"><i class="fas fa-spinner fa-spin mr-2"></i>Loading...</p>
          </div>
        </div>
      </div>
      <!-- Right Column: Alerts & Performance -->
      <div class="space-y-6">
        <!-- Stock Alerts -->
        <div class="card">
          <h3 class="text-lg font-bold text-dark mb-4">Stock Alerts</h3>
          <div id="stockAlerts" class="space-y-2">
            <p class="text-center text-secondary py-4"><i class="fas fa-spinner fa-spin mr-2"></i>Loading alerts...</p>
          </div>
        </div>
        <!-- Performance Summary - ENHANCED -->
        <div class="card">
          <h3 class="text-lg font-bold text-dark mb-4">Performance Summary</h3>
          <div id="performanceSummary" class="space-y-4">
            <!-- Sales Metrics -->
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-secondary">This Week's Sales</span>
                <span class="font-bold text-dark" id="weeklySales">GHC 0.00</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-secondary">This Month's Sales</span>
                <span class="font-bold text-dark" id="monthlySales">GHC 0.00</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-secondary">Inventory Turnover</span>
                <span class="font-bold text-dark" id="turnoverRate">0%</span>
              </div>
            </div>
           
            <!-- Top 5 Selling Items -->
            <div class="mt-4 pt-4 border-t border-gray-600">
              <h4 class="font-semibold text-dark mb-3">Top 5 Selling Items</h4>
              <div id="topSellingItems" class="space-y-2">
                <p class="text-center text-secondary py-2">Loading top items...</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
    <!-- Sales Section -->
    <div id="salesSection" class="card mt-4 hidden">
      <div class="sales-form-container">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-bold text-dark">Sales Form</h2>
          <button id="showSummaryButton" class="p-2 bg-primary text-white rounded">Today's Sales</button>
        </div>
        <form id="salesForm" class="flex flex-col space-y-4">
          <div><label for="saleDate" class="block text-secondary">Date</label><input id="saleDate" type="date" required></div>
          <div class="relative"><label for="itemName" class="block text-secondary">Item Name</label><input id="itemName" type="text" placeholder="Enter item name"><div id="itemNameAutocomplete" class="absolute border rounded mt-1 w-full hidden"></div></div>
          <div><label for="quantity" class="block text-secondary">Quantity (<span id="availableStock">Available: 0</span>)</label><input id="quantity" type="number" placeholder="Enter quantity" min="1"></div>
          <div><label for="unitPrice" class="block text-secondary">Unit Price (GHC)</label><input id="unitPrice" type="number" step="0.01" placeholder="Enter unit price" min="0"></div>
          <div><label for="paymentMethod" class="block text-secondary">Payment Method</label>
            <select id="paymentMethod"><option value="Cash">Cash</option><option value="Momo">Momo</option></select>
          </div>
          <input id="cost" type="hidden">
          <button type="button" id="addItemButton" class="p-2 bg-primary text-white rounded w-full">Add Item</button>
        </form>
      </div>
      <div id="salesBreakdown" class="sales-breakdown-container card mt-4 hidden"></div>
      <div class="sales-buttons-container flex justify-between mb-4 mt-4">
        <button type="button" id="submitSaleButton" class="p-2 bg-success text-white rounded">Submit Sale</button>
        <button type="button" id="deleteLastSaleButton" class="p-2 bg-error text-white rounded">Delete Last Sale</button>
      </div>
    </div>
    <!-- Inventory Section -->
    <div id="inventorySection" class="card mt-4 hidden">
      <div class="mb-4">
        <div class="table-info"><div class="row-count" id="rowCount">Loading...</div>
          <div class="search-controls">
            <input id="inventorySearch" type="text" placeholder="Search items..." class="p-2 border rounded search-input">
            <select id="statusFilter" class="p-2 border rounded filter-select">
              <option value="All">All Status</option><option value="In Stock">In Stock</option><option value="Low Stock">Low Stock</option><option value="Out of Stock">Out of Stock</option>
            </select>
            <button id="addInventoryButton" class="p-2 bg-success text-white rounded manager-only">Add Item</button>
            <button id="updateInventoryButton" class="p-2 bg-primary text-white rounded manager-only">Update Item</button>
            <button id="deleteInventoryButton" class="p-2 bg-error text-white rounded manager-only">Delete Item</button>
            <button id="bulkUploadButton" class="p-2 bg-secondary text-white rounded manager-only">Bulk Upload</button>
            <button id="refreshInventoryButton" class="p-2 bg-neutral text-white rounded manager-only">Refresh</button>
            <button id="InventoryValueButton" class="p-2 bg-primary text-white rounded manager-only">Inventory Value</button>
            <button id="exportInventoryButton" class="p-2 bg-secondary text-white rounded manager-only">Export Inventory</button>
          </div>
        </div>
        <div class="table-container">
          <table id="inventoryTable" class="w-full border">
            <thead>
              <tr><th>Name</th><th>Stock</th><th>Cost (GHC)</th><th>Price (GHC)</th><th>Purchase Date</th><th>Reorder Level</th><th>Status</th></tr>
            </thead>
            <tbody id="inventoryTableBody"></tbody>
          </table>
        </div>
        <div class="pagination" id="inventoryPagination"></div>
      </div>
    </div>
    <!-- Reports Section -->
    <div id="reportsSection" class="card mt-4 hidden">
      <form id="reportsForm" class="mb-4">
        <div class="flex items-center space-x-2 flex-wrap">
          <select id="reportType"><option value="daily">Daily</option><option value="weekly">Weekly</option><option value="monthly">Monthly</option><option value="summary">Summary</option></select>
          <div id="dailyWeeklyControl" class="report-date-control"><input id="reportDate" type="date"></div>
          <div id="monthlyControl" class="report-date-control hidden"><input id="reportMonth" type="month"></div>
          <div id="summaryDateRange" class="date-range-container hidden">
            <input id="summaryStartDate" type="date"><span>to</span><input id="summaryEndDate" type="date">
          </div>
          <button type="submit" class="p-2 bg-primary text-white rounded">Generate Report</button>
          <button type="button" id="exportReportButton" class="p-2 bg-secondary text-white rounded manager-only">Export Report</button>
        </div>
      </form>
      <div id="reportsOutput" class="card"></div>
    </div>
    <!-- Change Password Section -->
    <div id="changePasswordSection" class="card mt-4 hidden">
      <form id="changePasswordForm" class="w-1-3 mx-auto">
        <div id="userSelectContainer" class="mb-4 manager-only"><label for="userSelect" class="block text-secondary">Select User</label><select id="userSelect"></select></div>
        <div id="oldPasswordContainer" class="mb-4"><label for="oldPassword" class="block text-secondary">Old Password</label><input id="oldPassword" type="password" required></div>
        <div class="mb-4"><label for="newPassword" class="block text-secondary">New Password</label><input id="newPassword" type="password" required></div>
        <div class="mb-4"><label for="confirmNewPassword" class="block text-secondary">Confirm New Password</label><input id="confirmNewPassword" type="password" required></div>
        <button type="submit" class="w-full p-2 bg-primary text-white rounded">Change Password</button>
      </form>
    </div>
    <!-- Manage Users Section -->
    <div id="manageUsersSection" class="card mt-4 hidden">
      <div class="mb-4 flex flex-col space-y-4">
        <div class="flex items-center space-x-2 flex-wrap">
          <button id="addUserButton" class="p-2 bg-success text-white rounded manager-only">Add User</button>
          <button id="deleteUserButton" class="p-2 bg-error text-white rounded manager-only">Delete User</button>
        </div>
        <div class="table-container">
          <table id="usersTable" class="w-full border">
            <thead><tr><th>Username</th><th>Role</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
    <!-- Modals -->
    <div id="addInventoryModal" class="fixed inset-0 bg-black-50 flex items-center justify-center hidden modal">
      <div class="card w-1-3">
        <h2 class="text-lg font-bold mb-4 text-dark">Add Inventory Item</h2>
        <form id="addInventoryForm">
          <div class="mb-4"><label for="addName" class="block text-secondary">Name</label><input id="addName" type="text" required></div>
          <div class="mb-4"><label for="addStock" class="block text-secondary">Stock</label><input id="addStock" type="number" min="0" required></div>
          <div class="mb-4"><label for="addCost" class="block text-secondary">Cost (GHC)</label><input id="addCost" type="number" step="0.01" min="0" required></div>
          <div class="mb-4"><label for="addPrice" class="block text-secondary">Price (GHC)</label><input id="addPrice" type="number" step="0.01" min="0" required></div>
          <div class="mb-4"><label for="addPurchaseDate" class="block text-secondary">Purchase Date</label><input id="addPurchaseDate" type="date"></div>
          <div class="mb-4"><label for="addReorderLevel" class="block text-secondary">Reorder Level</label><input id="addReorderLevel" type="number" min="0" required></div>
          <div class="flex justify-end space-x-2">
            <button type="button" id="cancelAddButton" class="p-2 bg-neutral text-white rounded">Cancel</button>
            <button type="submit" class="p-2 bg-primary text-white rounded">Add</button>
          </div>
        </form>
      </div>
    </div>
    <div id="editInventoryModal" class="fixed inset-0 bg-black-50 flex items-center justify-center hidden modal">
      <div class="card w-1-3">
        <h2 class="text-lg font-bold mb-4 text-dark">Update Inventory Item</h2>
        <form id="editInventoryForm">
          <div class="mb-4 relative">
            <label for="editName" class="block text-secondary">Item Name</label>
            <input id="editName" type="text" placeholder="Search for item..." required>
            <div id="editNameAutocomplete" class="absolute border rounded mt-1 w-full hidden"></div>
          </div>
          <div class="mb-4">
            <label for="editCurrentStock" class="block text-secondary">Current Stock</label>
            <input id="editCurrentStock" type="number" readonly class="bg-gray-700">
          </div>
          <div class="mb-4">
            <label for="editAdjustedStock" class="block text-secondary">Adjusted Stock</label>
            <input id="editAdjustedStock" type="number" min="0" placeholder="Enter new stock value">
          </div>
          <div class="mb-4"><label for="editCost" class="block text-secondary">Cost (GHC)</label><input id="editCost" type="number" step="0.01" min="0"></div>
          <div class="mb-4"><label for="editPrice" class="block text-secondary">Price (GHC)</label><input id="editPrice" type="number" step="0.01" min="0"></div>
          <div class="mb-4"><label for="editPurchaseDate" class="block text-secondary">Purchase Date</label><input id="editPurchaseDate" type="date"></div>
          <div class="mb-4"><label for="editReorderLevel" class="block text-secondary">Reorder Level</label><input id="editReorderLevel" type="number" min="0"></div>
          <div class="flex justify-end space-x-2">
            <button type="button" id="cancelEditButton" class="p-2 bg-neutral text-white rounded">Cancel</button>
            <button type="submit" class="p-2 bg-primary text-white rounded">Update</button>
          </div>
        </form>
      </div>
    </div>
    <div id="bulkUploadModal" class="fixed inset-0 bg-black-50 flex items-center justify-center hidden modal">
      <div class="card w-1-3">
        <h2 class="text-lg font-bold mb-4 text-dark">Bulk Upload Inventory</h2>
        <form id="bulkUploadForm">
          <div class="mb-4"><label for="bulkUploadFile" class="block text-secondary">Upload CSV File</label><input id="bulkUploadFile" type="file" accept=".csv"></div>
          <div class="flex justify-end space-x-2">
            <button type="button" id="cancelBulkUploadButton" class="p-2 bg-neutral text-white rounded">Cancel</button>
            <button type="submit" class="p-2 bg-primary text-white rounded">Upload</button>
          </div>
        </form>
      </div>
    </div>
    <div id="InventoryValueModal" class="fixed inset-0 bg-black-50 flex items-center justify-center hidden modal">
      <div class="card w-1-3">
        <h2 class="text-lg font-bold mb-4 text-dark">Inventory Value</h2>
        <div id="InventoryValueContent" class="mb-4"><p class="text-dark">Total Inventory Value: <span id="InventoryValue">GHC 0.00</span></p></div>
        <div class="flex justify-end"><button type="button" id="closeInventoryValueButton" class="p-2 bg-neutral text-white rounded">Close</button></div>
      </div>
    </div>
    <div id="addUserModal" class="fixed inset-0 bg-black-50 flex items-center justify-center hidden modal">
      <div class="card w-1-3">
        <h2 class="text-lg font-bold mb-4 text-dark">Add User</h2>
        <form id="addUserForm">
          <div class="mb-4"><label for="addUsername" class="block text-secondary">Username</label><input id="addUsername" type="text" required></div>
          <div class="mb-4"><label for="addUserPassword" class="block text-secondary">Password</label><input id="addUserPassword" type="password" required></div>
          <div class="mb-4"><label for="addUserRole" class="block text-secondary">Role</label>
            <select id="addUserRole"><option value="Staff">Staff</option><option value="Manager">Manager</option></select>
          </div>
          <div class="flex justify-end space-x-2">
            <button type="button" id="cancelAddUserButton" class="p-2 bg-neutral text-white rounded">Cancel</button>
            <button type="submit" class="p-2 bg-primary text-white rounded">Add</button>
          </div>
        </form>
      </div>
    </div>
    <div id="deleteUserModal" class="fixed inset-0 bg-black-50 flex items-center justify-center hidden modal">
      <div class="card w-1/3">
        <h2 class="text-lg font-bold mb-4 text-dark">Delete User</h2>
        <form id="deleteUserForm">
          <div class="mb-4 relative"><label for="deleteUsername" class="block text-secondary">Username</label><input id="deleteUsername" type="text" required><div id="deleteUsernameAutocomplete" class="absolute border rounded mt-1 w-full hidden"></div></div>
          <div class="flex justify-end space-x-2">
            <button type="button" id="cancelDeleteUserButton" class="p-2 bg-neutral text-white rounded">Cancel</button>
            <button type="submit" class="p-2 bg-error text-white rounded">Delete</button>
          </div>
        </form>
      </div>
    </div>
    <div id="confirmDeleteModal" class="fixed inset-0 bg-black-50 flex items-center justify-center hidden modal">
      <div class="card"><p id="confirmDeleteMessage"></p>
        <div class="flex justify-end space-x-2">
          <button type="button" id="cancelDeleteButton" class="p-2 bg-neutral text-white rounded">Cancel</button>
          <button type="button" id="confirmDeleteButton" class="p-2 bg-error text-white rounded">Delete</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Google Apps Script API -->
  <script src="https://apis.google.com/js/api.js"></script>

  <!-- Wait for Google API to load -->
  <script>
    function onGoogleLoad() {
      // This tells your script.js that Google is ready
      window.googleScriptReady = true;
    }
  </script>
  <script src="https://apis.google.com/js/api.js" onload="onGoogleLoad()"></script>

  <!-- Your app code -->
  <script src="script.js"></script>
</body>
</html>
</html>



